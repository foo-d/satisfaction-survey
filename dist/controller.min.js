import{a,changePageButtons,csv,easeIn,lang,radio}from"../dist/model.min.js";let aLang=lang(navigator.language.substring(0,2));$.get("view/questions-0.html",(e=>{$("#page").html(e),changePageButtons(0),lang(aLang)})),easeIn(),$("#lang").on("click",(e=>{aLang=lang("fr"===aLang?"en":"fr")}));let required=!0;const COOKIE=$("#cookie");let question5=2,question7=2;const PAGE_NUMBER=$("#pageNumber");$(".next").on("click",(function(){switch($(this).data("from")){case 0:required=!0;const e=["lastName"+aLang,"firstName"+aLang,"age"+aLang,"email"+aLang,"phoneNumber"+aLang,"question0"+aLang];for(const t in e)!1!==required&&""!==document.getElementById(e[t]).value||(required=!1);required&&(document.cookie="lastName="+document.getElementById("lastName"+aLang).value+";",document.cookie="firstName="+document.getElementById("firstName"+aLang).value+";",document.cookie="question0="+document.getElementById("question0"+aLang).value+";");break;case 1:a.question1=document.getElementById("question11").value*document.getElementById("question12").value*10/8,a.question2=10*document.querySelector('input[name="question2"]:checked').value/4,a.question3=""===document.getElementById("question3").value?10:0;break;case 2:a.question4=document.getElementById("question4").value,a.question5=10*question5/3,a.question6=document.getElementById("question6").value/10;break;case 3:a.question7=10*question7/3,a.question8=document.getElementById("question8").checked?10:0;break;case 4:const t=document.createElement("a"),n="data:text/csv;charset=utf-8,"+csv+"\n"+document.cookie.split("; ").map((e=>e.split("=")[1])).join(",")+"\n";t.setAttribute("download","satisfaction-survey.csv"),t.setAttribute("href",encodeURI(n)),document.body.appendChild(t),t.click()}required?(document.getElementById("required").style.display="none",5!==parseInt(PAGE_NUMBER.text().charAt(0))&&anime({targets:"#home","margin-right":"3840px",easing:"easeInOutBack",complete:e=>{getPage($(this)),PAGE_NUMBER.text(parseInt(PAGE_NUMBER.text().charAt(0))+1+"/5"),easeIn()}})):document.getElementById("required").style.display="block"})),$(".previous").on("click",(function(){2===$(this).data("from")?question5=2:3===$(this).data("from")&&(question7=2),anime({targets:"#home","margin-left":"3840px",easing:"easeInOutBack",complete:e=>{getPage($(this)),PAGE_NUMBER.text(5!==parseInt(PAGE_NUMBER.text().charAt(0))?parseInt(PAGE_NUMBER.text().charAt(0))+1+"/5":"5/5"),document.getElementById("home").style.marginLeft="0",document.getElementById("home").style.marginRight="3840px",anime({targets:"#home","margin-right":"0",easing:"easeInOutBack"}),getPage($(this)),PAGE_NUMBER.text(parseInt(PAGE_NUMBER.text().charAt(0))-1+"/5")}})}));const getPage=e=>{$.get("view/questions-"+e.data("to")+".html",(t=>{switch($("#page").html(t),lang(aLang),e.data("to")){case 1:const e="fr"===aLang?"Bonjour ":"Hello ";COOKIE.html(e+document.cookie.split("; ").find((e=>e.startsWith("firstName"))).split("=")[1]+" "+document.cookie.split("; ").find((e=>e.startsWith("lastName"))).split("=")[1]+".");break;case 2:$("#question4").on("input",(e=>$("#rangeNumber").text(document.getElementById("question4").value))),$(".radio11, .radio12").on("click",(function(){question5=radio($(this))}));break;case 3:$(".radio2").on("click",(function(){question7=radio($(this))}));break;case 4:const t="fr"===aLang?"Merci ":"Thank you ",n="fr"===aLang?" pour avoir pris le temps de répondre à ce questionnaire. Sur la base de vos réponses, le restaurant obtient la note de :":" for taking the time to answer this questionnaire. Based on your answers, the restaurant obtains the score of:";COOKIE.html(t+document.cookie.split("; ").find((e=>e.startsWith("firstName"))).split("=")[1]+" "+document.cookie.split("; ").find((e=>e.startsWith("lastName"))).split("=")[1]+n),$(".submitButton").on("click",(e=>{""!==document.getElementById("fr"!==aLang?"question91":"question92").value?(document.getElementById("required").style.display="none",$("#comment").html("fr"===aLang?"Merci d'avoir laissé un commentaire.":"Thanks for leaving a comment.")):document.getElementById("required").style.display="block"}));let s=0;for(const e in a)s+=parseInt(a[e]);$("#score").html(s/8+"/10");const o=["#FFDDBD","#FCDFBE","#F9E1BF","#F6E3C1","#F4E5C2","#F1E7C4","#EEE9C5","#ECEBC6","#E9EDC8","#E6EFC9","#E4F1CB"];d3.csv("satisfaction-survey.csv").then((e=>{new Chart("ctx",{type:"bar",data:{labels:e.map((e=>e.question0)).sort(((e,t)=>e-t)),datasets:[{data:e.map((e=>e.score)),backgroundColor:e.map((e=>o[e.score]))}]},options:{legend:{display:!1},scales:{xAxes:[{scaleLabel:{display:!0,labelString:"fr"===aLang?"Fréquentation des restaurants chaque mois":"Attendance at restaurants each month"}}],yAxes:[{scaleLabel:{display:!0,labelString:"Score"}}]}}})})),document.cookie="score="+s/8+";"}changePageButtons(e.data("to"))}))};