import{changePageButtons}from"../model/change-page-buttons.js";import{csv}from"../model/csv.js";import{easeIn}from"../model/ease-in.js";import{radio}from"../model/radio.js";easeIn(),$.get("view/questions-0.html",(e=>$("#page").html(e))),changePageButtons(0);let required=!0;const COOKIE=$("#cookie"),QUESTION0=["lastName","firstName","age","email","phoneNumber","question0"];let question5=2,question7=2;const PAGE_NUMBER=$("#pageNumber");$(".next").on("click",(function(){switch($(this).data("from")){case 0:required=!0;for(const e in QUESTION0)!1!==required&&""!==document.getElementById(QUESTION0[e]).value||(required=!1);required&&(document.cookie="lastName="+document.getElementById("lastName").value+";",document.cookie="firstName="+document.getElementById("firstName").value+";",document.cookie="question0="+document.getElementById("question0").value+";");break;case 1:a.question1=document.getElementById("question11").value*document.getElementById("question12").value*10/8,a.question2=10*document.querySelector('input[name="question2"]:checked').value/4,a.question3=""===document.getElementById("question3").value?10:0;break;case 2:a.question4=document.getElementById("question4").value,a.question5=10*question5/3,a.question6=document.getElementById("question6").value/10;break;case 3:a.question7=10*question7/3,a.question8=document.getElementById("question8").checked?10:0,COOKIE.html("Thank you "+document.cookie.split("; ").find((e=>e.startsWith("firstName"))).split("=")[1]+" "+document.cookie.split("; ").find((e=>e.startsWith("lastName"))).split("=")[1]+" for taking the time to answer this questionnaire. Based on your answers, the restaurant obtains the score of:");break;case 4:const e=document.createElement("a"),t="data:text/csv;charset=utf-8,"+csv+"\n"+document.cookie.split("; ").map((e=>e.split("=")[1])).join(",")+"\n";e.setAttribute("download","satisfaction-survey.csv"),e.setAttribute("href",encodeURI(t)),document.body.appendChild(e),e.click()}required?(document.getElementById("required").style.display="none",anime({targets:"#home","margin-right":"3840px",easing:"easeInOutBack",complete:e=>{getPage($(this)),PAGE_NUMBER.text(5!==parseInt(PAGE_NUMBER.text().charAt(0))?parseInt(PAGE_NUMBER.text().charAt(0))+1+"/5":"5/5"),easeIn()}})):document.getElementById("required").style.display="block"})),$(".previous").on("click",(function(){2===$(this).data("from")?question5=2:3===$(this).data("from")&&(question7=2),getPage($(this)),PAGE_NUMBER.text(parseInt(PAGE_NUMBER.text().charAt(0))-1+"/5")}));const getPage=e=>{$.get("view/questions-"+e.data("to")+".html",(t=>{switch($("#page").html(t),e.data("to")){case 1:COOKIE.html("Hello "+document.cookie.split("; ").find((e=>e.startsWith("firstName"))).split("=")[1]+" "+document.cookie.split("; ").find((e=>e.startsWith("lastName"))).split("=")[1]+".");break;case 2:$("#question4").on("input",(e=>$("#rangeNumber").text(document.getElementById("question4").value))),$(".radio1").on("click",(function(){question5=radio($(this))}));break;case 3:$(".radio2").on("click",(function(){question7=radio($(this))}));break;case 4:$("#submitButton").on("click",(e=>{""!==document.getElementById("question9").value?(document.getElementById("required").style.display="none",$("#comment").html("Thanks for leaving a comment.")):document.getElementById("required").style.display="block"}));let e=0;for(const t in a)e+=parseInt(a[t]);$("#score").html(e/8+"/10");const t=["#FFDDBD","#FCDFBE","#F9E1BF","#F6E3C1","#F4E5C2","#F1E7C4","#EEE9C5","#ECEBC6","#E9EDC8","#E6EFC9","#E4F1CB"];d3.csv("satisfaction-survey.csv").then((e=>{new Chart("ctx",{type:"bar",data:{labels:e.map((e=>e.question0)).sort(((e,t)=>e-t)),datasets:[{data:e.map((e=>e.score)),backgroundColor:e.map((e=>t[e.score]))}]},options:{legend:{display:!1},scales:{xAxes:[{scaleLabel:{display:!0,labelString:"Attendance at restaurants each month"}}],yAxes:[{scaleLabel:{display:!0,labelString:"Score"}}]}}})})),document.cookie="score="+e/8+";"}})),changePageButtons(e.data("to"))};